function check_form(){$("#applicant_details tr").each(function(){var c=$(this);var a=$(c).attr("id").indexOf("edit_app");if(a==0){var b=$(c).attr("id").replace("edit_app_","");if(!_check_applicant_details(b,"")){$("#app_"+b).hide();$("#edit_app_"+b).show()}}})}function book(){var a=document.getElementById("agree_cancelpolicy");if(a.checked==true){$('select[name*="birth_day"]').each(function(){var e=$(this).attr("id");e=e.replace("birth_day","");var b=$(this).val();var d=$("#birth_month"+e).val();var c=$("#birth_year"+e).val();if(b!=""&&d!=""&&c!=""){$("#birthday"+e).val(b+"-"+d+"-"+c)}});$('input[name*="nationality_name"]').each(function(){var c=$(this).attr("id");c=c.replace("nationality_name","");var b=$("#nationality"+c+" option:selected").text();$(this).val(b)});document.frmPayment.action.value="pay";document.frmPayment.submit()}else{alert(i18n.payment_term_condition_cfm)}}function _edit_applicant(a){$("#app_"+a).hide();$("#edit_app_"+a).show()}function _update_applicant(b,a){if(b=="update"){if(!_check_applicant_details(a,"update")){return false}update_visa_payment_price()}$("#app_"+a).show();$("#edit_app_"+a).hide()}function _check_applicant_details(d,c){var b=true;var a=["input[name='passport_name"+d+"']","select[name='gender"+d+"']","select[name='nationality"+d+"']","select[name='birth_day"+d+"']","select[name='birth_month"+d+"']","select[name='birth_year"+d+"']","input[name='passport_number"+d+"']"];a.forEach(function(k,g){var f=$("#edit_app_"+d+" "+k);if(f.val().length==0){$(f).addClass("red-border");b=false}else{$(f).removeClass("red-border");if(c=="update"){if(g==0||g==6){var j=$(f).parent().index();$("#app_"+d).find("td").eq(j).html(f.val())}else{if(g==1||g==2){var j=$(f).parent().index();var l=$(f).find(":selected").text();$("#app_"+d).find("td").eq(j).html(l)}else{if(g==3||g==4||g==5){var j=$(f).parent().index();var e=$("#birth_day"+d).val();var m=$("#birth_month"+d).val();var h=$("#birth_year"+d).val();if(e!=""&&m!=""&&h!=""){m=$("#birth_month"+d).find(":selected").text();m=m.substr(0,3);var l=e+" "+m+" "+h;$("#app_"+d).find("td").eq(j).html(l)}}}}}}});if(b==false){$("#dv_err").show()}return b}function update_visa_payment_price(){var d=$("#numb_visa").val();if(d!=0){var k=$("#visa_nationality").val();var j=$("#visa_type").val();var a=$("#rush_service").val();var f=$("#bank_fee").val();var c=0;for(i=0;i<d;i++){var b=k;var g=i;if($("#nationality"+g).length&&$("#nationality"+g).val()!=""){b=$("#nationality"+g).val()}var l=get_visa_price(b,1,j,a);c=parseInt(c,10)+parseInt(l.rate,10)}$("#visa_total_fee").html(c);var e=c*f/100;e=Math.round(e*100)/100;$("#visa_bank_fee").html(e);var h=c+e;$("#visa_final_total").html(h)}};